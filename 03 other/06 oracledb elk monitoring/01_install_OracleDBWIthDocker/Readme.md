도커를 사용하여 오라클 DB설치를 설명합니다.

# 1. git 다운로드
```
$ git clone https://github.com/oracle/docker-images.git
```


# 2. 오라클db 설치 파일 다운로드
* 다운로드 링크는 18.4버전기준 **docker-images/OracleDatabase/SingleInstance/dockerfiles/18.4.0/Dockerfile.xe**에 존재(로그인 필요)

![](screenshot/docker_screenshot1.png)

<br/>

![](screenshot/docker_screenshot2.png)

<br/>

* 다운로드 받은 파일은 **dockerfiles/version**로 이동

```
$ cd docker-images/OracleDatabase/SingleInstance/dockerfiles/18.4.0
$ mv ~/Downloads/oracle-database-xe-18c-1.0-1.x86_64.rpm ./
```

<br/>

![](screenshot/docker_screenshot3.png)

# 3. 도커 이미지 빌드
```
$ cd docker-images/OracleDatabase/SingleInstance/dockerfiles/
$ sudo ./buildDockerImage.sh -v 18.4.0 -x
```

# 4. 도커 컨테이너 실행
## 4.1 도커 이미지 이름 확인
* 이 예제에서는 **oracle/database**
```
$ cd docker-images/OracleDatabase/SingleInstance/dockerfiles/18.4.0
$ sudo docker images
REPOSITORY                                      TAG                 IMAGE ID            CREATED             SIZE
oracle/database                                 18.4.0-xe           30e38e7ee286        About an hour ago   8.44GB
```

## 4.2 컨테이너 실행
* 오라클db파일이 저장되는 위치는 **db**파일로 설정
* 로그인 비밀번호는 toor로 설정

```
$ cd docker-images/OracleDatabase/SingleInstance/dockerfiles/18.4.0
$ mkdir db
$ docker run --name test_oracle \
-p 1521:1521 -p 5500:5500 \
-e ORACLE_PWD=toor \
-v db:/opt/oracle/oradata \
oracle/database:18.4.0-xe
```

<br/>

* 설치확인: Completed메세지가 제일 마지막에 표시

![](screenshot/docker_screenshot4.png)

# 5. 오라클 원격접속
## 5.1 sqlplus 설치
* https://manjaro.site/how-to-install-sqlplus-utility-on-ubuntu-18-04-and-ubuntu-18-10/ 참고

## 5.2 오라클db 원격접속
```
$ sqlplus sys/toor@//localhost:1521/XE as sysdba
$ sqlplus system/toor@//localhost:1521/XE
$ sqlplus pdbadmin/toor@//localhost:1521/XEPDB1
```

* 접속 성공 시 Connected to 메세지 출력

![](screenshot/docker_screenshot5.png)


# 참고자료
* 오라클 db 도커 설치: https://emflant.tistory.com/237
* 오라클 db 이미지: https://github.com/oracle/docker-images/tree/master/OracleDatabase/SingleInstance/dockerfiles