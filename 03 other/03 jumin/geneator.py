#-*- coding:utf-8 -*-
import random
import string
import re

class Geneator:
    def __init__(self):
        self.re = '[0-9]{6}[-][0-9]{7}'

    def geneator(self):
        """
        0~9 숫자범위 내에 주민번호 형식을 생성
        reference: https://hongku.tistory.com/297
        return: [0-9]{6}-[0-9]{7}
        """ 
        result = ""
        for idx in range(0, 6):
            result += random.choice(string.digits)
        result += '-'
        for idx in range(0, 7):
            result += random.choice(string.digits)
        
        return result

    def save(self, filename, lines=100):
        """
        생성한 주민번호를 파일에 저장
        """
        with open(filename, 'w') as f:
            for idx in range(0, lines):
                result = self.geneator()
                f.write(result + '\n')

    def check(self, jumin):
        """
        주민번호 유효성 검사
        return 
        True: 올바른 주민번호
        False: 올바르지 않은 주민번호
        """
        keyNums = [2, 3, 4, 5, 6, 7, 8, 9, 2, 3, 4, 5]
        total = 0
 
        for item in range(len(keyNums)):
            r =  int(jumin[item]) * keyNums[item]
            total += r
 
        result = (11 - (total % 11)) % 10
        if result == int(jumin[12]):
            return True
        else:
            return False

    def extract(self, filename):
        """
        주민번호 추출
        """
        with open(filename, 'r') as f:
            line = f.read()
        
        _regex = re.compile(self.re)
        return _regex.findall(line.strip('\n'))